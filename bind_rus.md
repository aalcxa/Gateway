# Binding

Протокол Zigbee поддерживает непосредственную привязку Endpoint устройств, которая позволяет  напрямую управлять друг другом без вмешательства координатора или любого программного обеспечения для домашней автоматизации.


# Настройка через Web 

Необходимо через Web интерфейс на вкладке zigbee зайти в управлящее устройство  (пульт) и указать адрес и конечный Endpoint управляемого устройства. 


Порядок действия следующий:
1) Заходим на страницу пульта или датчика, который будет привязываться к устройству
2) Выбираем доступные кластеры устройства
![](/img/bind_cluster.png)
3) Выбираем управляемое устройство
![](/img/bind_dev.png)
4) Выбираем EndPoint  управляемого  устройства
![](/img/bind_ep.png)
5) Нажимаем Bind




# Настройка через MQTT (в разработке)

Структура топиков полностью повторяет проект [zigbee2mqtt](https://www.zigbee2mqtt.io/information/binding.html)

Необходимо в топик 

```
zigbee2mqtt/bridge/bind/SOURCE_DEVICE_FRIENDLY_NAME
```
отправить значение TARGET_DEVICE_FRIENDLY_NAME, где SOURCE_DEVICE_FRIENDLY_NAME - адрес или FN пульта, TARGET_DEVICE_FRIENDLY_NAME - адрес или FN управляемого устройства.

В результате  исходное устройство привяжется с целевым.  

Для отвязки устройств необходимо отправить 

```
zigbee2mqtt/bridge/unbind/SOURCE_DEVICE_FRIENDLY_NAME
```
с параметром TARGET_DEVICE_FRIENDLY_NAME,  где SOURCE_DEVICE_FRIENDLY_NAME - адрес или FN пульта, TARGET_DEVICE_FRIENDLY_NAME - адрес или FN управляемого устройства.






# Типы устройств
Далеко не все устройства имеют прошивки с поддержкой такой привязки. Популярный в СНГ производитель zigbee оборудования Xiaomi только с появлением устройств Zigbee 3 озаботился наличием этого функционала, хотя ранее  выпущенных протокол Zigbee 1.2 уже имел такую возможность. 

Список протестированных устройств, имеющих прошивки с заполненными параметрами Endpoint

### Ikea
Беспроводной пульт ICTC-G-1 

### Xiaomi 
Беспроводной пульт WXCJKG12LM
Беспроводной пульт XCJKG11LM

### DiyRUZ

Пульты с прошивками от  [@DJONvl](https://modkam.ru/?p=1264)


Список будет пополняться.

